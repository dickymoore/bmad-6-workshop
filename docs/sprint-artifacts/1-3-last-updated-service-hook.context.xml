<story-context id=".bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>1</epicId>
    <storyId>1.3</storyId>
    <title>Last-updated service hook</title>
    <status>review</status>
    <generatedAt>2025-12-03</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/1-3-last-updated-service-hook.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>user</asA>
    <iWant>to see when data was last saved</iWant>
    <soThat>I trust the state I'm viewing</soThat>
    <tasks><![CDATA[
    - Create last-updated storage helper with atomic write, ISO validation, and seeding.
    - Integrate helper into booking/import flows (stub-ready functions) and ensure UI updates state when timestamp changes.
    - Render timestamp near filters with accessibility; show placeholder when empty.
    - Add tests covering storage read/write, ISO validation, UI display updates.
    ]]></tasks>
  </story>

  <acceptanceCriteria><![CDATA[
    1) UI displays last-updated timestamp near filters from data/last-updated.json.
    2) After booking create/cancel/import, timestamp refreshes immediately in UI and on disk.
    3) Timestamp stored/shown as ISO string; empty handled gracefully.
    4) Storage helper updates last-updated.json on every successful write/import and returns { ok, error } on failure.
    ]]></acceptanceCriteria>

  <artifacts>
    <docs><![CDATA[
    - docs/architecture.md (last-updated file, data layout)
    - docs/sprint-artifacts/tech-spec-epic-1.md (storage helpers, atomic write contract)
    - docs/prd.md (FR12â€“FR15 persistence visibility)
    ]]></docs>
  </artifacts>
</story-context>
