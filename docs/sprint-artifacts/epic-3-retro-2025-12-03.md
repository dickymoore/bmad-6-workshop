# Epic 3 Retrospective — Booking Actions & Rules (2025-12-03)

## Context
- Epic: 3 — Booking Actions & Rules
- Stories delivered: 4/4 (3.1–3.4) — all marked done
- Environment: Local-only (no staging/prod yet)
- Stakeholder acceptance: Confirmed “all good” (DICKY)
- Team: Bob (Scrum Master), Alice (Product Owner), Charlie (Senior Dev), Dana (QA), DICKY (Project Lead)

## What Went Well
1. Conflict prevention: One-booking-per-user/day enforced both client- and storage-side, reducing edge-case risk.
2. Attribution clarity: User selection + visitor handling ensure every booking is identifiable.
3. UX feedback: Confirmation and cancel flows show clear success/error toasts; state updates promptly in map/list.
4. Consistent state wiring: Floorplan, list, and storage subscriptions stay in sync after create/cancel.

## What Was Hard / Risks
1. Environment drift persists (Node 20 runs vs engines 22) — still no CI; could hide issues in booking logic.
2. No staging/prod data flow: booking persistence untested beyond localStorage; risk when moving to real backend or hosted env.
3. Limited e2e: Unit/component tests exist, but no end-to-end covering create→conflict→cancel across UI surfaces.

## Lessons Learned
- Dual-layer validation (client + storage) catches conflicts early and definitively; reuse this pattern for future rules.
- Shared state stores for map/list reduce duplication; continue centralizing booking logic.
- Confirmation UX with explicit payload preview (user/desk/date) minimizes accidental bookings; keep for future flows.

## Continuity from Previous Retros (Epics 1–2)
- Node 22 CI — **Still pending**
- Staging environment/asset plan — **Still pending**
- Initial e2e happy-path — **Still pending**
- Asset existence/coord validation check (Epic 2 action) — **Pending**
- E2E for filters→map→availability (Epic 2 action) — **Pending**

## Action Items (Owners)
1. Stand up CI on Node 22.x (Charlie).
2. Define staging/hosting plan for data and assets (Alice + Charlie).
3. Add e2e coverage for booking flows: select user → create booking → conflict prevention → cancel (Dana).
4. Add automated asset/coordinate validation to catch missing floorplans before runtime (Dana).

## Readiness Check
- Testing: Unit/component good; e2e missing for booking flows — add before any external release.
- Deployment: None; staging plan required.
- Stakeholder acceptance: Yes (local).
- Stability: Feels solid locally; confidence depends on CI + e2e.
- Blockers: None beyond action items above.

## Next Steps / Prepping for Epic 4 (Backups, Import/Restore, UI polish)
- Dependencies: Booking correctness is solid; backup/import will touch same storage — ensure CI/e2e in place first.
- Critical path before Epic 4:
  - CI Node 22 up
  - Staging/asset plan defined
  - Booking e2e suite in place

---
Bob (Scrum Master): "Great progress on core booking flows. Let’s close the loop with CI, staging, and e2e so backup/import work in Epic 4 is built on a stable base."
